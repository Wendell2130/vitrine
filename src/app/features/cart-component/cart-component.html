<div class="cart-container">
  
  <div class="cart-title">Carrinho Atual</div>
  @for(product of cartService.productsInCart();track product.id){
    <div class="product-item">
      <div class="product-info">
        <img [src]="product.image" alt="{{product.title}}" >
           {{product.title.slice(0,10)}}... Quantidade:<strong> {{product.quantity}}</strong> Unidade:<strong>R$ {{product.price}}</strong>
      </div>
      <div class="actions">
        <button class="add" (click)="addOne(product.id)"><i class="material-icons">add</i></button>
       <button class="subtract"(click)="subtractOne(product.id)"><i class="material-icons">remove</i></button>
       <button class="remove"(click)="removeProduct(product.id)"><i class="material-icons">delete</i></button>
      </div>
      
       
    </div>
  }@empty {
    <div class="empty-cart">Nenhum produto no carrinho.</div>
  }
  <div class="cart-total">
   Total: R$ {{cartActualTotal}} 
   </div>
   @if(cartService.productsInCart().length > 0){
    <div class="checkout">
    <button >Finalizar Compra</button>
   </div>
   }
   
  
  <hr> <br>

  <div class="cart-title">Histórico de Compras</div>

  @for(cart of cartsView$ | async ;track cart.id; let i = $index){
    <div class="cart-date">Data: {{cart.date | datestr}}</div>
   
    @for(product of cart.products;track product.productId){
      <div class="product-item">
        <div class="product-info">
        
          <img [src]="product.image" alt="{{product.title}}" >
        </div>
        <div class="product-info">
          <span>Nome:</span> {{product.title}}
        </div>
        <div class="product-info">
          <span>Quantidade:</span> {{product.quantity}}
        </div>
        <div class="product-info">
          <span>Preço:</span> R$ {{product.price}}
        </div>
        <div class="product-total">
          Total: R$ {{product.price * product.quantity}}
          
        </div>
      </div>
    }@empty {
      <div class="empty-cart">Carregando.</div>
    }
    <div class="cart-total" >
     Total da Compra: R$ {{getCartProductsTotal(cart).toFixed(2)}}
   </div>
   <hr>
   
    
  }
</div>